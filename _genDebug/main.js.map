{"version":3,"sources":["main.ts"],"names":[],"mappings":"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","file":"../gen/scripts/main.js","sourcesContent":["/* eslint-disable @typescript-eslint/no-non-null-assertion */\n/* eslint-disable @typescript-eslint/no-empty-function */\nimport * as VG from \"@pureeval/voxel-geometry\";\nimport {\n  MinecraftBlockTypes,\n  BlockType,\n  Player,\n  Dimension,\n  BlockRaycastOptions,\n  Vector3,\n  ChatSendAfterEvent,\n  BlockPlaceAfterEvent,\n  ItemUseAfterEvent,\n  MolangVariableMap,\n  system,\n} from \"@minecraft/server\";\n\nimport { OVER_WORLD, events, Vec3, eq_item } from \"./wrapper\";\ntype Space = VG.Vec3[];\n\nclass Sandbox {\n  sandbox: object;\n  // boxProxy: Object;\n  constructor(sandbox: object) {\n    this.sandbox = sandbox;\n    // this.boxProxy = new Proxy(this.sandbox, {});\n  }\n\n  eval(code: string): unknown {\n    const body = `with(inside) { ${code} }`;\n    const fn = new Function(\"inside\", body);\n    return fn(this.sandbox);\n  }\n\n  updateEnv(...env: object[]) {\n    Object.assign(this.sandbox, ...env);\n  }\n}\n\ninterface Setting {\n  block: BlockType;\n  origin: VG.Vec3;\n  brush_item: string;\n}\n\nexport default class System {\n  operator: Player | null = null;\n  evaluator: Sandbox;\n  dimension: Dimension = OVER_WORLD;\n  setting: Setting;\n  // eslint-disable-next-line @typescript-eslint/ban-types\n  funcs: { [key: string]: any } = {\n    ...VG.Generator,\n    ...VG.Exp,\n    ...VG.Transform,\n    ...VG.LSystem,\n    ...VG.IFS,\n    dla2d: VG.DLA2D,\n    dla3d: VG.DLA3D,\n    // Effect\n    plot: this.plot,\n    repeat: this.repeat,\n    render: this.spawnParticles,\n    summon: this.summonEntities,\n    place: this.placeMode,\n    brush: this.brush,\n    tellraw: this.tellraw,\n    getpos: () => {\n      this.setPosition(this.getPlayerPosition());\n    },\n  };\n  callbacks: { [key: string]: (arg: any) => void } = {};\n  savedCode = \"\";\n  // callbacks: { [key: string]: Function } = {};\n  constructor() {\n    this.setting = {\n      block: MinecraftBlockTypes.ironBlock,\n      origin: new VG.Vec3(0, 0, 0),\n      brush_item: \"minecraft:stick\",\n    };\n    for (const p of this.dimension.getPlayers({ closest: 5 })) {\n      this.operator = p;\n    }\n    this.evaluator = new Sandbox(this.funcs);\n    this.evaluator.updateEnv(this.setting);\n  }\n\n  run() {\n    this.subscribe();\n    events.worldInitialize.subscribe(() => this.boardcast(\"Voxel Geometry :: System initialized\"));\n    this.watch_dog();\n  }\n\n  repeat(fn: () => void, interval: number, count: number) {\n    for (let i = 0; i < count; i++) {\n      system.runTimeout(fn, i * interval);\n    }\n  }\n\n  // Subscribe\n\n  subscribe() {\n    events.afterChat.subscribe((eventData: ChatSendAfterEvent) => {\n      const player = eventData.sender;\n      if (this.operator === null) this.operator = player;\n      const Chat = eventData.message;\n      if (Chat.startsWith(\"-\")) {\n        const script = Chat.substring(1).trim();\n        this.tellraw(`<< §3${script}`);\n        this.evaluator.updateEnv({\n          callbacks: this.callbacks,\n          setBlock: this.setBlock,\n          setting: this.setting,\n          operator: player,\n          dimension: this.dimension,\n        });\n        try {\n          const result = this.evaluator.eval(script);\n          if (result) {\n            this.tellraw(`>> §e${result}`);\n          } else {\n            this.tellraw(`>> §eSuccess`);\n          }\n        } catch (e) {\n          this.tellraw(`>> §4${e}`);\n        }\n      }\n    });\n\n    events.blockPlace.subscribe(() => {});\n  }\n\n  // World Action\n  fill(blockType: BlockType, begin: Vector3, end: Vector3) {\n    const [xFrom, yFrom, zFrom, xTo, yTo, zTo] = [begin.x, begin.y, begin.z, end.x, end.y, end.z];\n    for (let x = xFrom; x <= xTo; ++x) {\n      for (let y = yFrom; y <= yTo; ++y) {\n        for (let z = zFrom; z <= zTo; ++z) {\n          this.dimension.getBlock(Vec3(x, y, z))!.setType(blockType);\n        }\n      }\n    }\n  }\n\n  plot(blocks: Space, pos = this.setting.origin, tile = this.setting.block): void {\n    blocks.forEach((block) => {\n      this.setBlock(tile, Vec3(block.x + pos.x, block.y + pos.y, block.z + pos.z));\n    });\n  }\n\n  spawnParticles(space: Space, effect: string, origin = this.setting.origin) {\n    const mvm = new MolangVariableMap();\n    space.forEach((pos) => {\n      this.dimension.spawnParticle(effect, Vec3(pos.x + origin.x, pos.y + origin.y, pos.z + origin.z), mvm);\n    });\n  }\n\n  summonEntities(space: Space, entity: string, origin = this.setting.origin) {\n    space.forEach((pos) => {\n      this.dimension.spawnEntity(entity, Vec3(pos.x + origin.x, pos.y + origin.y, pos.z + origin.z));\n    });\n  }\n\n  spawnParticle(pos: Vector3, effect: string, origin = this.setting.origin) {\n    this.dimension.spawnParticle(\n      effect,\n      Vec3(pos.x + origin.x, pos.y + origin.y, pos.z + origin.z),\n      new MolangVariableMap()\n    );\n  }\n\n  setBlocks(blockType: BlockType, blocks: Vector3[]) {\n    blocks.forEach((block) => {\n      this.dimension.getBlock(block)!.setType(blockType);\n    });\n  }\n\n  setBlock(block: BlockType, pos: Vector3) {\n    this.dimension.getBlock(pos)!.setType(block);\n  }\n\n  placeMode(blocks: Space = []): void {\n    if (this.callbacks[\"place\"]) {\n      const callback: (a: BlockPlaceAfterEvent) => void = this.callbacks[\"place\"];\n      events.blockPlace.unsubscribe(callback);\n      delete this.callbacks[\"place\"];\n    }\n    if (blocks.length !== 0) {\n      this.callbacks[\"place\"] = events.blockPlace.subscribe((eventData) => {\n        const pos = eventData.block.location;\n        const block = eventData.block.type;\n        this.plot(blocks, pos, block);\n      });\n    }\n  }\n\n  brush(blocks: Space = []): void {\n    if (this.callbacks[\"brush\"]) {\n      const callback: (a: ItemUseAfterEvent) => void = this.callbacks[\"brush\"];\n      events.itemUse.unsubscribe(callback);\n      delete this.callbacks[\"brush\"];\n    }\n    if (blocks.length !== 0) {\n      this.callbacks[\"brush\"] = events.itemUse.subscribe((eventData) => {\n        const opt: BlockRaycastOptions = {\n          maxDistance: 256,\n          includeLiquidBlocks: false,\n          includePassableBlocks: true,\n        };\n        const block = eventData.source.getBlockFromViewDirection(opt);\n        if (block != undefined && eq_item(eventData.itemStack, this.setting.brush_item)) {\n          const pos = block.block.location;\n          this.plot(blocks, pos);\n        }\n      });\n    }\n  }\n\n  cloneArea(target: Vector3, begin: Vector3, end: Vector3) {\n    const [xFrom, yFrom, zFrom, xTo, yTo, zTo] = [begin.x, begin.y, begin.z, end.x, end.y, end.z];\n    for (let x = xFrom; x <= xTo; ++x) {\n      for (let y = yFrom; y <= yTo; ++y) {\n        for (let z = zFrom; z <= zTo; ++z) {\n          this.setBlock(\n            this.getBlock(Vec3(x, y, z)),\n            Vec3(target.x + x - xFrom, target.y + y - yFrom, target.z + z - zFrom)\n          );\n        }\n      }\n    }\n  }\n\n  // Info :\n\n  tellraw(...message: string[]) {\n    this.dimension.runCommandAsync(Tellraw(this.operator!.name, ...message.map((m) => `§6${m}`)));\n  }\n\n  boardcast(...message: string[]) {\n    this.dimension.runCommandAsync(Tellraw(\"@a\", ...message.map((m) => `§e${m}`)));\n  }\n\n  getPlayerPosition(): Vector3 {\n    return this.operator!.location;\n  }\n\n  getBlock(pos: Vector3): BlockType {\n    return this.dimension.getBlock(pos)!.type;\n  }\n\n  // Modify config\n\n  setPosition(pos: Vector3) {\n    this.setting.origin = pos;\n  }\n\n  // Watch Dog\n  watch_dog() {\n    events.beforeWatchdogTerminate.subscribe((e) => {\n      if (e.terminateReason.toString() == \"hang\") {\n        e.cancel = true;\n      }\n    });\n  }\n}\n\nfunction Tellraw(Player: string, ...Message: string[]) {\n  return `tellraw ${Player} {\"rawtext\":[{\"text\":\"${now()} ${Message.join(\"\\n\")}\"}]}`;\n}\n\nfunction now(): string {\n  const date = new Date();\n  return [\"[\", date.toTimeString().slice(0, 8), \"]\"].join(\"\");\n}\n\nconst sys = new System();\n\nsys.run();\n"],"sourceRoot":"../scripts"}